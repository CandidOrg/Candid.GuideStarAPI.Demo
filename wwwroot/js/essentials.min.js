function showLoadingSpinner(){$("#loadingSpinner").show()}function updateTable(n){$("#loadingSpinner").hide();var t=JSON.parse(n);t.code===200?(vueapp.tableData=t.data.total_hits>0?t.data.hits:[],vueapp.searchJson=t):($("#errorMessage").html(t.message),$("#errorModal").modal("show"))}function ajaxError(n,t){$("#loadingSpinner").hide();console.log("Error when doing /api/search request");console.log(t);console.dir(n);console.dir(t)}var vueapp;$(function(){var n=new Vue({el:"#app",filters:{json:n=>JSON.stringify(n,null,2)},data:{tableData:null,currentOrg:{organization_name:null,ein:null,mission:null,city:null,website:null},verifiedOrg:{organization_id:null,organization_name:null,organization_name_aka:null,city:null,state:null,address_line_1:null,address_line_2:null,contact_phone:null,ein:null,subsection_description:null,charity_check_last_modified:null,pub78_organization_name:null,pub78_ein:null,pub78_verified:null,pub78_city:null,most_recent_pub78:null,most_recent_irb:null,bmf_organization_name:null,bmf_ein:null,bmf_status:null,most_recent_bmf:null,foundation_509a_status:null},searchJson:{},verifyJson:{}},watch:{tableData:function(n){t.clear().rows.add(n).draw()}}}),t=$("#searchResults").DataTable({dom:"<'row'<'col-md-12'i <'dttooltip'>>><'row'<'col-md-12'tr>><'row'<'col-md-12'p>>",data:n.tableData,autowidth:!0,columns:[{data:"organization_name"},{data:"ein"},{data:"state"},{data:"form990_total_revenue"},{data:"mission"}],columnDefs:[{width:"30%",targets:0},{width:"15%",targets:1},{bSortable:!1,width:"10%",targets:2},{width:"10%",render:$.fn.dataTable.render.number(",",".",0,"$"),targets:3},{bSortable:!1,render:$.fn.dataTable.render.ellipsis(140,!0),targets:4}],aaSorting:[]});$("div.dttooltip").append('<i id="searchRawJson" class="material-icons" style="float:right;" aria-hidden="true" tool-tip-toggle="tooltip-json" data-original-title="This data is generated from the Essentials API. Click to view the data!">info<\/i>');$("#searchResults").on("click","tr",function(t){var r=t.currentTarget.children[1].innerText,i;r!=="EIN"&&(i=n.tableData.filter(function(n){return n.ein===r})[0],console.log("selectedOrgInfo"),console.dir(i),i!==null&&(n.currentOrg=i,$("#detailedInfo").modal("show")))});$("#searchTerms").keyup(function(n){n.keyCode===13&&$("#searchButton").click()});$("#verifyOrg").on("click",function(){$.ajax({method:"GET",url:"/charitycheck/check",data:{ein:n.currentOrg.ein},dataType:"json",beforeSend:function(){$("#loadingSpinner").show()},success:function(t){$("#loadingSpinner").hide();n.verifiedOrg=t.data;n.verifyJson=t;$("#verifiedOrg").modal("show")},error:function(n,t){$("#loadingSpinner").hide();console.log("Error when doing /api/search request");console.log(t);console.dir(n);console.dir(t)}})});$('[tool-tip-toggle="tooltip-json"]').tooltip({placement:"left"});$('[data-toggle="tooltip"]').tooltip();$("#searchRawJson").on("click",function(){$("#rawJson").html(jsonPrettyPrint.toHtml(n.searchJson));$("#rawJsonModal").modal("show")});$("#verifyRawJson").on("click",function(){$("#rawJson").html(jsonPrettyPrint.toHtml(n.verifyJson));$("#rawJsonModal").modal("show")});$("#inputState").multiselect({numberDisplayed:5,maxHeight:200,buttonWidth:"100%"});$("#inputLevel").multiselect({maxHeight:200,buttonWidth:"100%"});$("#inputNtee").multiselect({maxHeight:200,buttonWidth:"100%"});vueapp=n});